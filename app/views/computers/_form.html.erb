<%= render "shared/errors", obj: @computer %>

<div class="row">
  <div class="well col-md-8 col-md-offset-2">
    <%= form_for(@computer, html: { multipart: true }) do |f| %>
    
      <%= f.label :manufacturer %>
      <%= f.text_field :manufacturer, :placeholder => "Toshiba" %>
      <%= f.label :computer_type, "Computer Type" %>
      <%= f.text_field :computer_type, :placeholder => "Laptop"%>
      <%= f.label :specification, "Specification (if known)" %> <!-- rows: 3 -->
      <%= f.text_area :specification, :placeholder => "Intel Celeron 1.1GHz, 256MB RAM 20GB HDD" %>
      <% if logged_in? %>
        <%= f.label :donor %>
      <% else %>
        <%= f.label :donor, "Your Name" %>
      <% end %>
      <%= f.text_field :donor, :placeholder => "Mr. John Smith" %>
      <%= f.label :model_no, "Model No." %>
      <%= f.text_field :model_no, :placeholder => "Satellite S1800-712" %>
      <%= f.label :serial_no, "Serial No." %>
      <%= f.text_field :serial_no, :placeholder => "43564391D" %>
      <%= f.label :product_key, "OS Product Key" %>
      <%= f.text_field :product_key, :placeholder => "Windows XP Professional QD464-ASF5F-VCF45-BV334-23DFS"%>
      
      <span class="picture">
        <!-- Creates file field and whitelist -->
        <%= f.label "Picture (optional)" %>
        <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
      </span>
      
      <% if logged_in? %>
        <br><strong>Wiping Details:<br><br></strong>
        <%= f.fields_for :wipe do |wipe_form| %>
          <%= wipe_form.label :action_taken %>
          <%= wipe_form.text_field :action_taken %>
        <% end %>
      <% end %>

      <%= f.submit(@computer.new_record? ? "Submit Details" : "Submit Edited Details", class: "btn btn-success") %>
    <% end %>
    
  </div>
</div>

<script type="text/javascript">
  $('#computer_picture').bind('change',function() {
    size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file');
    }
  });
</script>