<%= render "shared/errors", obj: @computer %>

<div class="row">
  <div class="well col-md-8 col-md-offset-2">
    <%= form_for(@computer, html: { multipart: true }) do |f| %>
    
      <%= f.label :manufacturer %>
      <%= f.text_field :manufacturer, :placeholder => "Toshiba" %>
      <%= f.label :computer_type %>
      <%= f.text_field :computer_type, :placeholder => "Laptop"%>
      <%= f.label :specification %>
      <%= f.text_area :specification, :placeholder => "Intel Celeron 1.1GHz, 256MB RAM 20GB HDD" %>
      <%= f.label :donor %>
      <%= f.text_field :donor, :placeholder => "Mr. John Smith" %>
      <%= f.label :model_no %>
      <%= f.text_field :model_no, :placeholder => "Satellite S1800-712" %>
      <%= f.label :serial_no %>
      <%= f.text_field :serial_no, :placeholder => "43564391D" %>
      <%= f.label :product_key %>
      <%= f.text_field :product_key, :placeholder => "Windows XP Professional QD464-ASF5F-VCF45-BV334-23DFS"%>
      <%= f.label :action_taken %>
      <%= f.text_area :action_taken, rows: 3%>
      <%= f.label :date %>
      <%= f.date_field :date %>
      <%= f.label :initials_flag %>
      <%= f.text_field :initials_flag %>
      
      <strong>Wiping Details</strong><br><br>
   
      <%= f.collection_check_boxes :wipe_ids, Wipe.all, :id, :wiped_by do |x| %>
        <% x.label(class: "checkbox-inline input_checkbox") {x.check_box(class: "checkbox") + x.text} %>
      <% end %>
      <br><br>
      
      <%= f.collection_check_boxes :wipe_ids, Wipe.all, :id, :wiped_using do |x| %>
        <% x.label(class: "checkbox-inline input_checkbox") {x.check_box(class: "checkbox") + x.text} %>
      <% end %>
      <br><br>
      
      <%= f.collection_check_boxes :wipe_ids, Wipe.all, :id, :date_wiped do |x| %>
          <% x.label(class: "checkbox-inline input_checkbox") {x.check_box(class: "checkbox") + x.text} %>
      <% end %>
      <br><br>
      
      <span class="picture">
        <!-- Creates file field and whitelist -->
        <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
      </span>

      <%= f.submit(@computer.new_record? ? "Submit Details" : "Submit Edited Details", class: "btn btn-success") %>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  $('#computer_picture').bind('change',function() {
    size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file');
    }
  });
</script>